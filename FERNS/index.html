<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Beyond Toxics FERNS Pesticides</title>
  <meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
  <!-- Core Mapbox -->
  <link href="https://api.mapbox.com/mapbox-gl-js/v3.13.0/mapbox-gl.css" rel="stylesheet">
  <script src="https://api.mapbox.com/mapbox-gl-js/v3.13.0/mapbox-gl.js"></script>
  <!-- Mapbox Search Box -->
  <link href="https://api.mapbox.com/mapbox-assembly/v1.3.0/assembly.min.css" rel="stylesheet">
  <script id="search-js" defer="" src="https://api.mapbox.com/search-js/v1.2.0/web.js"></script>
  <!-- Beyond Toxics Font (proxima nova) -->
  <link rel="stylesheet" href="https://use.typekit.net/acr2rva.css">
  <!-- Inset Map -->
  <script src="https://d3js.org/d3.v7.min.js"></script>
  <!-- noUiSlider (Year selection filter) -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/nouislider@15.7.1/dist/nouislider.min.css">
  <script src="https://cdn.jsdelivr.net/npm/nouislider@15.7.1/dist/nouislider.min.js"></script>
  <!-- Styling-->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-sRIl4kxILFvY47J16cr9ZwB07vP4J8+LH7qKQnuqkuIAvNWLzeN8tE5YBujZqJLB" crossorigin="anonymous">
  <link rel="stylesheet" type="text/css" href="ferns.css">
</head>
<body>
  <!-- Load wheel -->
  <div id="loading-spinner" class="loading-spinner-overlay" style="display: none;">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
  </div>
  <!-- Main and Inset Maps -->
  <div id="map"></div>
  <!-- Right Side Controls Container -->
  <div class="right-side-container collapsed">
    <!-- Toggle button for collapsing/expanding right-side panel -->
    <button id="toggle-panel-button" class="toggle-panel-button" title="Toggle Panel" aria-label="Toggle Panel">
      <span class="toggle-icon">&#9654;</span>
    </button>
    <!-- Year Selection controller -->
    <div class="range_container">
      <h1><strong>Year Selection</strong></h1>
      <!-- noUiSlider -->
      <div class="sliders_control">
        <div id="yearSlider"></div>
      </div>
    </div>
    <!-- Method Filter -->
    <div class="method_container">
      <h1><strong>Method of Application</strong></h1>
      <div class="method-content-wrapper">
        <div class="method-checkboxes">
          <label>
            <input type="checkbox" id="method-aerial" value="Aerial" checked>
            <span class="method-legend-item" data-method="aerial" style="background-color: #FF6B35;"></span>
            Aerial
          </label>
          <label>
            <input type="checkbox" id="method-ground" value="Ground" checked>
            <span class="method-legend-item" data-method="ground" style="background-color: #9B59B6;"></span>
            Ground
          </label>
          <label>
            <input type="checkbox" id="method-other" value="Other" checked>
            <span class="method-legend-item" data-method="other" style="background-color: #495057;"></span>
            Other
          </label>
          <label>
            <input type="checkbox" id="method-no-data" value="No Data" checked>
            <span class="method-legend-item" data-method="no-data" style="background-color: #ADB5BD;"></span>
            No Data
          </label>
        </div>
        <div class="method-symbology-switch">
          <div class="form-check form-switch">
            <label class="form-check-label">
              <input class="form-check-input" type="checkbox" role="switch" id="methodSymbologySwitch">
              Symbology
            </label>
          </div>
        </div>
      </div>
    </div>
    <!-- Chemical Filter -->
    <div class="chemical_container">
      <h1><strong>Chemical Filter</strong></h1>
      <input type="text" id="chemical-search" placeholder="Search Chemicals...">
      <div class="select-all-container">
        <label for="select-all-checkbox">
          <input type="checkbox" id="select-all-checkbox" checked>
          <strong>Select All</strong>
        </label>
      </div>
      <div id="chemical-list">
        <!-- Checkboxes will be dynamically populated -->
      </div>
    </div>
    <!-- Legend of Federal Lands -->
    <div class="federal-legend">
      <div class="federal-legend-inner">
        <div class="form-check form-switch" id="federal-lands-switch">
          <input class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckChecked" checked>
          <div class="legend-item-label">Federally Managed Land</div>
        </div>
        <div class="legend-items">
          <div class="legend-item-symbol BLM" style="background-color: rgb(217, 195, 82); border-color: transparent; opacity: 0.5;"></div>
          <div class="legend-item-label">BLM</div>
          <br>
          <div class="legend-item-symbol USFS" style="background-color: transparent; border-color: rgb(131, 162, 120); opacity: 1; box-shadow: rgba(131, 162, 120, 0.3) 0 0 0 3px inset;"></div>
          <div class="legend-item-label">USFS Forest</div>
          <br>
          <div class="legend-item-symbol USFWS" style="background-color: transparent; border-color: rgb(107, 128, 160); opacity: 0.5; box-shadow: rgba(121, 141, 170, 0.3) 0 0 0 3px inset;"></div>
          <div class="legend-item-label">USFWS Refuge</div>
          <br>
          <div class="legend-item-symbol NPS" style="background-color: transparent; border-color: rgb(154, 139, 112); opacity: 1; box-shadow: rgba(154, 139, 112, 0.3) 0 0 0 3px inset;"></div>
          <div class="legend-item-label">National Park Service</div>
        </div>
      </div>
    </div>
  </div>
  <div id="bottom-left-container">
    <!-- Inset Map Container -->
    <div id="inset-map-container">
      <div id="insetMap"></div>
    </div>
  </div>
</body>
<!-- External JS -->
<script src="styles.js"></script>
<script src="ferns.js"></script>
</html>